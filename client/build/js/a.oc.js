/*!
* PitchPrint - v8.3.0 - Auto-compiled on this 9th day of February in the year of our Lord 2017 
* @author SynergicLabs
*/var PPADMIN=PPADMIN||{version:"8.3.0",readyFncs:[]};!function(a){"use strict";if(!jQuery)throw new Error("jQuery required for PitchPrint!");var b=jQuery,c=a.PPADMIN;c.vars||(c.vars={});var d;c.init=function(){function a(a,b){var c="";"u"===a.type?(c="Uploaded Files: &nbsp;&nbsp;&nbsp;",a.files.forEach(function(a,b){c+='<a target="_blank" href="'+a+'" >File '+(b+1)+"</a> &nbsp;&nbsp;&nbsp;"})):(c='<div style="display: inline-block; -webkit-inline-box; vertical-align: top; margin-top:10px;">&#8226; <a target="_blank" href="'+d.adminPath+"orders/"+(a.projectId||a.projectID)+'">Download PDF File</a>',c+='<br/>&#8226; <a target="_blank" href="'+d.adminPath+"raster/"+(a.projectId||a.projectID)+'" >Download Raster Renderings</a>',(a.userId||a.userID)&&(c+='<br/>&#8226; <a target="_blank" href="'+d.adminPath+"editor/edit-project/?m=edit&p="+(a.projectId||a.projectID)+"&u="+(a.userId||a.userID)+'">Load Project and Modify</a>'),a.designTitle&&(c+="<br/>&#8226; Design: "+a.designTitle),c='</div><img style="margin-top:10px; margin-right:10px" src="'+(a.legacy?"../image/data/previews/":d.rscBase+"images/previews/")+(a.projectId||a.projectID)+'_1.jpg" width="150" />'+c),b.html(c)}function e(a){try{var b=JSON.parse(decodeURIComponent(a));return!(!b.type||!b.product)}catch(c){return!1}return!0}d=c.vars,b("small[pp-value]").each(function(){var c=b(this);if("true"==c.attr("pp-value").trim())if(c.html().indexOf('<span data="')>-1&&c.text(c.html().replace('<span data="',"").replace('"><i w2p-data="file_upload"></i></span>',"")),e(c.text()))a(JSON.parse(decodeURIComponent(c.text())),c);else{var d,f=c.html().split(":");"u"==f[0]?(d={files:[]},d.type="u",f[1].split(",").forEach(function(a,b){d.files.push(a)})):d={projectId:f[1],userId:f[4],mata:{},product:{},legacy:!0,type:"p"},a(d,c)}})},c.fetchDesigns=function(){if(d.credentials)return""===d.credentials.apiKey||""===d.credentials.signature?void c.invalidCredentials({message:"Kindly provide your API and Secret Keys. Thank you!"}):void b.ajax({type:"POST",dataType:"json",url:d.runtimeBase+"/fetch-designs",data:d.credentials,success:function(a){a.error?c.invalidCredentials(a):c.generateForm(a)}})},c.generateForm=function(a){a.sort(function(a,b){return a.title>b.title?-1:1}).reverse(),b("#web2print_init_option").length&&b("#web2print_init_option").html(b("#web2print_option_form").detach().html());var e;a.forEach(function(a){e="*"+a.id,b("#ppa_pick").append('<option style="color:black;" iscategory="true" value="'+e+'">'+a.title+"</option>"),e==d.selectedOption&&b("#ppa_pick").val(e),a.designs.sort(function(a,b){return a.title>b.title?-1:1}).reverse(),a.designs.forEach(function(a){b("#ppa_pick").append('<option style="color:#aaa" value="'+a.id+'" >&nbsp; &nbsp; &nbsp; &#187; '+a.title+"</option>"),a.id!=d.selectedOption&&a.oldRef!=d.selectedOption||b("#ppa_pick").val(a.id)})}),b("#ppa_pick_upload").val(d.current_upload_opt),c.changeOpts()},c.changeOpts=function(){var a=b("#web2print_option_values");if(!a.length&&b('[value="Web2Print"]').length){var c=b('[value="Web2Print"]').prop("name").replace("[name]","[value]");b('[value="Web2Print"]').parent().append('<input id="web2print_option_values" type="hidden" name="'+c+'" value="'+(b('[name="ppa_pick"]').val()+":"+b('[name="ppa_pick_upload"]').val())+'" />'),a=b("#web2print_option_values")}a.val(b('[name="ppa_pick"]').val()+":"+b('[name="ppa_pick_upload"]').val())},c.invalidCredentials=function(a){b("#web2print_init_option").html('<span style="color:#F00">PitchPrint: '+a.message+"</span>")},c.start=function(){c.readyFncs.forEach(function(a){c[a]()}),c.readyFncs=[]},c.start()}(this);