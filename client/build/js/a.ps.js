/*!
* PitchPrint - v8.3.0 - Auto-compiled on this 9th day of February in the year of our Lord 2017 
* @author SynergicLabs
*/var PPADMIN=PPADMIN||{version:"8.3.0",readyFncs:[]};!function(a){"use strict";if(!jQuery)throw new Error("jQuery required for PitchPrint!");var b=jQuery,c=a.PPADMIN;c.vars||(c.vars={});var d,e="@PP@";c.init=function(){function a(a,c){var e="";if("u"===a.type)e="Uploaded Files: &nbsp;&nbsp;&nbsp;",a.files.forEach(function(a,b){e+='<a target="_blank" href="'+a+'" >File '+(b+1)+"</a> &nbsp;&nbsp;&nbsp;"});else{e='<div style="display: inline-block; -webkit-inline-box; vertical-align: top; margin-top:10px;">&#8226; <a target="_blank" href="'+d.adminPath+"orders/"+a.projectId+'">Download PDF File</a>',e+='<br/>&#8226; <a target="_blank" href="'+d.adminPath+"raster/"+a.projectId+'" >Download Raster Renderings</a>',""!==a.userId&&a.userId&&(e+='<br/>&#8226; <a target="_blank" href="'+d.adminPath+"editor/edit-project/?p="+a.projectId+"&u="+a.userId+'">Load Project and Modify</a></div>');for(var f="",g=0;g<a.numPages;g++)f+='<a rel="fb__" class="fancybox_" href="'+d.rscBase+"images/previews/"+a.projectId+"_"+(g+1)+'.jpg" style="margin-right:5px" ><img src="'+d.rscBase+"images/previews/"+a.projectId+"_"+(g+1)+'.jpg" class="imgm img-thumbnail" width="100" ></a>';e=f+e}b(c).parent().append(e),b(c).remove()}function f(a){try{var b=JSON.parse(decodeURIComponent(a));return!(!b.type||!b.product)}catch(c){return!1}return!0}d=c.vars;var g;b("p").each(function(){g=b(this).html().trim(),f(g)&&a(JSON.parse(decodeURIComponent(g)),this)}),b("strong").each(function(){b(this).html()===e&&b(this).html("").parent().css({width:"150px"})})},c.hideHacks=function(){b("#text_fields").length&&(d.indexVal=b("#pp_indexVal").val(),b("#ppa_pick_upload").is(":checked")||"0"!==b("#ppa_pick").val()?b("#text_fields").val(1).parent().parent().hide():b("#text_fields").val(0).show())},c.changeOpts=function(){var a=b("#ppa_pick").val();a+=":"+(b("#ppa_pick_upload").is(":checked")?1:0),b("#ppa_pick_hide_cart_btn").length&&(a+=":"+(b("#ppa_pick_hide_cart_btn").is(":checked")?1:0)),b("#ppa_values").val(a),c.hideHacks()},c.initOpts=function(){d.productValues.length>1&&(b("#ppa_pick_upload").prop("checked",1==parseInt(d.productValues[1])),b("#ppa_pick_hide_cart_btn").prop("checked",1==parseInt(d.productValues[2]))),c.changeOpts()},c.generateForm=function(){if(d.formDisplayed!==!0&&d.designs){var a;"string"==typeof d.productValues&&(d.productValues=d.productValues.split(":")),d.selectedOption=d.productValues[0],b("#ppa_pick").empty().append('<option style="color:#aaa" value="0">-- None --</option>'),b("#ppa_pick").length&&(d.designs.forEach(function(c){a="*"+c.id,b("#ppa_pick").append('<option style="color:#D00;" iscategory="true" value="'+a+'">'+c.category_title+"</option>"),a==d.selectedOption&&b("#ppa_pick").val(a),c.designs.sort(function(a,b){return a.title>b.title?1:-1}),c.designs.forEach(function(a){b("#ppa_pick").append('<option value="'+a.id+'" >&nbsp; &nbsp; &nbsp; &#187; '+a.title+"</option>"),a.id!=d.selectedOption&&a.oldRef!=d.selectedOption||b("#ppa_pick").val(a.id)})}),c.initOpts(),b("#ppa_pick,#ppa_pick_hide_cart_btn,#ppa_pick_upload").on("change",function(){c.changeOpts()}),d.formDisplayed=!0)}},c.invalidCredentials=function(a){b("#link-ModulePitchprint").click(function(){setTimeout(function(){b("#w2p-div").length&&(b("#w2p-div").html(a||"Kindly configure PitchPrint.<br/>If you have, please re-check the API and Secret Keys and ensure they are correctly typed"),b("#pp_div_footer").hide())},500)})},c.fetchDesigns=function(){if(d=c.vars,d.credentials)return d.credentials.apiKey&&d.credentials.signature?void b.ajax({type:"POST",dataType:"json",url:d.runtimeBase+"fetch-designs",data:d.credentials,success:function(a){a.error?c.invalidCredentials(a.error):(d.designs=a,c.generateForm())},error:function(a,b,d){c.invalidCredentials()}}):void c.invalidCredentials()},window.onload=function(){d=c.vars,b("#link-ModulePitchprint").click(function(){d.formDisplayed||setTimeout(function(){c.generateForm()},4e3),c.hideHacks()}),b("#link-Customization").click(function(){setTimeout(function(){c.hideHacks()},1e3)})},c.start=function(){c.readyFncs.forEach(function(a){c[a]()}),c.readyFncs=[]},c.start()}(this);